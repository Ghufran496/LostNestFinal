{"ast":null,"code":"import { connectToDatabase } from \"../../../lib/db\";\n\nasync function handler(req, res) {\n  if (req.method === \"POST\") {\n    return;\n  } else {\n    try {\n      const client = await connectToDatabase();\n      const postedItemCollection = client.db().collection(\"PostedItem\");\n      const totalPosts = await postedItemCollection.countDocuments();\n      console.log(totalPosts);\n      res.status(200).json(totalPosts);\n    } catch (error) {\n      console.error(\"Error:\", error);\n      res.status(500).json({\n        message: \"Internal Server Error: Unable to fetch and Display Specific Posts\"\n      });\n      return;\n    }\n  }\n}\n\nexport default handler;","map":{"version":3,"sources":["G:/FYP/LostNestfyp/lostnestprj/pages/api/stats/getposts.js"],"names":["connectToDatabase","handler","req","res","method","client","postedItemCollection","db","collection","totalPosts","countDocuments","console","log","status","json","error","message"],"mappings":"AAAA,SAASA,iBAAT,QAAkC,iBAAlC;;AAEA,eAAeC,OAAf,CAAuBC,GAAvB,EAA4BC,GAA5B,EAAiC;AAC/B,MAAID,GAAG,CAACE,MAAJ,KAAe,MAAnB,EAA2B;AACzB;AACD,GAFD,MAEO;AACL,QAAI;AACF,YAAMC,MAAM,GAAG,MAAML,iBAAiB,EAAtC;AAEA,YAAMM,oBAAoB,GAAGD,MAAM,CAACE,EAAP,GAAYC,UAAZ,CAAuB,YAAvB,CAA7B;AACA,YAAMC,UAAU,GAAG,MAAMH,oBAAoB,CAACI,cAArB,EAAzB;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAYH,UAAZ;AACAN,MAAAA,GAAG,CAACU,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBL,UAArB;AACD,KAPD,CAOE,OAAOM,KAAP,EAAc;AACdJ,MAAAA,OAAO,CAACI,KAAR,CAAc,QAAd,EAAwBA,KAAxB;AACAZ,MAAAA,GAAG,CAACU,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACnBE,QAAAA,OAAO,EACL;AAFiB,OAArB;AAIA;AACD;AACF;AACF;;AAED,eAAef,OAAf","sourcesContent":["import { connectToDatabase } from \"../../../lib/db\";\r\n\r\nasync function handler(req, res) {\r\n  if (req.method === \"POST\") {\r\n    return;\r\n  } else {\r\n    try {\r\n      const client = await connectToDatabase();\r\n\r\n      const postedItemCollection = client.db().collection(\"PostedItem\");\r\n      const totalPosts = await postedItemCollection.countDocuments();\r\n      console.log(totalPosts);\r\n      res.status(200).json(totalPosts);\r\n    } catch (error) {\r\n      console.error(\"Error:\", error);\r\n      res.status(500).json({\r\n        message:\r\n          \"Internal Server Error: Unable to fetch and Display Specific Posts\",\r\n      });\r\n      return;\r\n    }\r\n  }\r\n}\r\n\r\nexport default handler;\r\n"]},"metadata":{},"sourceType":"module"}
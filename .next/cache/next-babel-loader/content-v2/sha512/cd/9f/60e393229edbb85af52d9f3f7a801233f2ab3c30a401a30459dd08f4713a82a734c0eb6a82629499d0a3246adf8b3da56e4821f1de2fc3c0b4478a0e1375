{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"G:/FYP/LostNestfyp/lostnestprj/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"G:/FYP/LostNestfyp/lostnestprj/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport React from \"react\";\nimport classes from \"./PostForm.module.css\";\nimport Button from \"../UI/Button\";\nimport { useRef, useState } from \"react\";\nimport Loader from \"../UI/Loader\";\n\nfunction sendPostData(_x, _x2, _x3, _x4, _x5, _x6, _x7) {\n  return _sendPostData.apply(this, arguments);\n}\n\nfunction _sendPostData() {\n  _sendPostData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(Type, Category, Title, Description, Question, Date, imageInbase64) {\n    var response, data;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return fetch(\"/api/post/postitem\", {\n              method: \"POST\",\n              body: JSON.stringify({\n                Type: Type,\n                Category: Category,\n                Title: Title,\n                Description: Description,\n                Question: Question,\n                Date: Date,\n                ReducedImg: imageInbase64\n              }),\n              headers: {\n                \"Content-Type\": \"application/json\"\n              }\n            });\n\n          case 2:\n            response = _context2.sent;\n            _context2.next = 5;\n            return response.json();\n\n          case 5:\n            data = _context2.sent;\n\n            if (response.ok) {\n              _context2.next = 8;\n              break;\n            }\n\n            throw new Error(data.message || \"Something went wrong!\");\n\n          case 8:\n            return _context2.abrupt(\"return\", data);\n\n          case 9:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _sendPostData.apply(this, arguments);\n}\n\nfunction PostForm() {\n  var _useState = useState(false),\n      isLoading = _useState[0],\n      setIsLoading = _useState[1];\n\n  var _useState2 = useState(\"\"),\n      isImage = _useState2[0],\n      setIsImage = _useState2[1];\n\n  var typeInputRef = useRef();\n  var categoryInputRef = useRef();\n  var titleInputRef = useRef();\n  var descriptionInputRef = useRef();\n  var questionInputRef = useRef();\n  var dateInputRef = useRef();\n\n  function converttobase64(e) {\n    // console.log(e);\n    var reader = new FileReader();\n    reader.readAsDataURL(e.target.files[0]);\n\n    reader.onload = function () {\n      //console.log(reader.result);\n      setIsImage(reader.result);\n    };\n\n    reader.onerror = function () {\n      console.log(\"error\", error);\n    };\n  }\n\n  var postSubmitHandler = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(event) {\n      var enteredType, enteredCategory, enteredTitle, enteredDescription, enteredQuestion, enteredDate, humanReadableDate, result;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              event.preventDefault();\n              setIsLoading(true);\n              enteredType = typeInputRef.current.value;\n              enteredCategory = categoryInputRef.current.value;\n              enteredTitle = titleInputRef.current.value;\n              enteredDescription = descriptionInputRef.current.value;\n              enteredQuestion = questionInputRef.current.value;\n              enteredDate = dateInputRef.current.value;\n              humanReadableDate = new Date(enteredDate).toLocaleDateString(\"en-US\", {\n                day: \"numeric\",\n                month: \"long\",\n                year: \"numeric\"\n              });\n              _context.prev = 9;\n              _context.next = 12;\n              return sendPostData(enteredType, enteredCategory, enteredTitle, enteredDescription, enteredQuestion, humanReadableDate, isImage);\n\n            case 12:\n              result = _context.sent;\n              console.log(result);\n              event.target.reset(); // This resets the form\n\n              setIsLoading(false);\n              _context.next = 21;\n              break;\n\n            case 18:\n              _context.prev = 18;\n              _context.t0 = _context[\"catch\"](9);\n              console.log(_context.t0);\n\n            case 21:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[9, 18]]);\n    }));\n\n    return function postSubmitHandler(_x8) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  if (isLoading) {\n    return /*#__PURE__*/_jsx(Loader, {});\n  }\n\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsx(\"h1\", {\n      className: classes.head1,\n      children: \"Post new Item as Lost Item\"\n    }), /*#__PURE__*/_jsx(\"h2\", {\n      children: \"Please Provide genunine Informations only.\"\n    }), /*#__PURE__*/_jsxs(\"form\", {\n      className: classes.form,\n      onSubmit: postSubmitHandler,\n      children: [/*#__PURE__*/_jsx(\"select\", {\n        name: \"item\",\n        className: classes.customselect,\n        ref: typeInputRef,\n        children: /*#__PURE__*/_jsx(\"option\", {\n          value: \"Lost\",\n          children: \"Lost\"\n        })\n      }), /*#__PURE__*/_jsxs(\"select\", {\n        name: \"category\",\n        className: classes.customselect,\n        ref: categoryInputRef,\n        children: [/*#__PURE__*/_jsx(\"option\", {\n          value: \"\",\n          disabled: true,\n          selected: true,\n          children: \"Category\"\n        }), /*#__PURE__*/_jsx(\"option\", {\n          value: \"Wallet\",\n          children: \"Wallet\"\n        }), /*#__PURE__*/_jsx(\"option\", {\n          value: \"ID Card / Student Card\",\n          children: \"ID Card / Student Card\"\n        }), /*#__PURE__*/_jsx(\"option\", {\n          value: \"Smart Phone / Laptop\",\n          children: \"Smart Phone / Laptop\"\n        }), /*#__PURE__*/_jsx(\"option\", {\n          value: \"Keys\",\n          children: \"Keys\"\n        }), /*#__PURE__*/_jsx(\"option\", {\n          value: \"Others\",\n          children: \"Others\"\n        })]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        style: {\n          display: \"flex\",\n          flexDirection: \"column\"\n        },\n        children: [/*#__PURE__*/_jsx(\"label\", {\n          htmlFor: \"name\",\n          style: {\n            fontSize: \"2rem\",\n            fontWeight: \"bolder\"\n          },\n          children: \"Item Name\"\n        }), /*#__PURE__*/_jsx(\"input\", {\n          type: \"text\",\n          name: \"name\",\n          placeholder: \"Title\",\n          className: classes.customselect,\n          ref: titleInputRef\n        })]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        style: {\n          display: \"flex\",\n          flexDirection: \"column\"\n        },\n        children: [/*#__PURE__*/_jsx(\"label\", {\n          htmlFor: \"description\",\n          style: {\n            fontSize: \"2rem\",\n            fontWeight: \"bolder\"\n          },\n          children: \"Description\"\n        }), /*#__PURE__*/_jsx(\"textarea\", {\n          type: \"text\",\n          name: \"description\",\n          placeholder: \"Description about item (like location etc...)\",\n          className: classes.customselect,\n          ref: descriptionInputRef,\n          rows: \"5\"\n        })]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        style: {\n          display: \"flex\",\n          flexDirection: \"column\"\n        },\n        children: [/*#__PURE__*/_jsx(\"label\", {\n          htmlFor: \"question\",\n          style: {\n            fontSize: \"2rem\",\n            fontWeight: \"bolder\"\n          },\n          children: \"Enter question based on an item.\"\n        }), /*#__PURE__*/_jsx(\"input\", {\n          type: \"text\",\n          name: \"question\",\n          placeholder: \"Ex:- What is the color of the phone?\",\n          className: classes.customselect,\n          ref: questionInputRef\n        })]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        style: {\n          display: \"flex\",\n          flexDirection: \"column\"\n        },\n        children: [/*#__PURE__*/_jsx(\"label\", {\n          htmlFor: \"date\",\n          style: {\n            fontSize: \"2rem\",\n            fontWeight: \"bolder\"\n          },\n          children: \"Select a Date:\"\n        }), /*#__PURE__*/_jsx(\"input\", {\n          type: \"date\",\n          name: \"date\",\n          id: \"date\",\n          className: classes.customselect,\n          ref: dateInputRef\n        })]\n      }), /*#__PURE__*/_jsx(\"input\", {\n        type: \"file\",\n        id: \"image\",\n        name: \"image\",\n        accept: \"image/*\",\n        className: classes.customselect,\n        onChange: converttobase64\n      }), /*#__PURE__*/_jsx(Button, {\n        content: \"Post\"\n      })]\n    })]\n  });\n}\n\nexport default PostForm;","map":null,"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import { getSession } from \"next-auth/client\";\nimport { connectToDatabase } from \"../../../lib/db\";\n\nasync function handler(req, res) {\n  if (req.method === \"POST\") {\n    return;\n  } else {\n    const session = await getSession({\n      req: req\n    });\n\n    if (!session) {\n      res.status(401).json({\n        message: \"Not authenticated!\"\n      });\n      return;\n    }\n\n    const userEmail = session.user.email;\n\n    try {\n      //const data = await getPostsByEmail(userEmail);\n      const client = await connectToDatabase();\n      const usersCollection = client.db().collection(\"PostedItem\");\n      const data = await usersCollection.find({\n        posterEmail: userEmail\n      }).toArray();\n      res.status(200).json(data);\n    } catch (error) {\n      console.error(\"Error:\", error);\n      res.status(500).json({\n        message: \"Internal Server Error: Unable to fetch and Display Specific Posts\"\n      });\n      return;\n    }\n  }\n}\n\nexport default handler; // import { getPostsByEmail } from \"../../../lib/db\";\n// import { getSession } from \"next-auth/client\";\n// async function handler(req, res) {\n//   if (req.method === \"POST\") {\n//     return;\n//   } else {\n//     const session = await getSession({ req: req });\n//     if (!session) {\n//       res.status(401).json({ message: \"Not authenticated!\" });\n//       return;\n//     }\n//     try {\n//       const userEmail = session.user.email;\n//       const data = await getPostsByEmail(userEmail);\n//       //console.log(data);\n//       res.status(200).json(data);\n//       client.close();\n//     } catch (error) {\n//       // console.error(\"Error:\", error);\n//       res.status(500).json({\n//         message:\n//           \"Internal Server Error: Unable to fetch and Display Specific Posts\",\n//       });\n//       client.close();\n//     }\n//   }\n// }\n// export default handler;","map":null,"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import { getSession } from \"next-auth/client\";\nimport { connectToDatabase } from \"../../../lib/db\";\n\nasync function handler(req, res) {\n  if (req.method === \"GET\") {\n    const session = await getSession({\n      req: req\n    });\n\n    if (!session) {\n      res.status(401).json({\n        message: \"Not authenticated!\"\n      });\n      return;\n    }\n\n    const userEmail = session.user.email;\n    const client = await connectToDatabase();\n    const usersCollection = client.db().collection(\"users\");\n    const user = await usersCollection.findOne({\n      email: userEmail\n    }, {\n      projection: {\n        password: 0\n      }\n    });\n\n    if (!user) {\n      res.status(404).json({\n        message: \"User not found.\"\n      });\n      client.close();\n      return;\n    }\n\n    const Profiledata = JSON.parse(JSON.stringify(user));\n    res.status(200).json(Profiledata);\n    client.close();\n  }\n}\n\nexport default handler;","map":null,"metadata":{},"sourceType":"module"}
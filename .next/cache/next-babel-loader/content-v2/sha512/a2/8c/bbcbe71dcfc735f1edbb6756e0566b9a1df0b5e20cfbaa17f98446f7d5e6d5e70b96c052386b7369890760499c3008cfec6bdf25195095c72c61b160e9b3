{"ast":null,"code":"import { connectToDatabase } from \"../../../lib/db\";\n\nasync function handler(req, res) {\n  if (req.method === \"POST\") {\n    return;\n  } else {\n    try {\n      const client = await connectToDatabase();\n      const postedItemCollection = client.db().collection(\"PostedItem\"); //const totalPostsCount = await postedItemCollection.countDocuments();\n\n      const lostPostsCount = await postedItemCollection.countDocuments({\n        Type: \"Lost\"\n      }); //   const foundPostsCount = await postedItemCollection.countDocuments({\n      //     Type: \"Found\",\n      //   });\n\n      console.log(lostPostsCount);\n      res.status(200).json(lostPostsCount);\n    } catch (error) {\n      console.error(\"Error:\", error);\n      res.status(500).json({\n        message: \"Internal Server Error: Unable to fetch and Display Specific Posts\"\n      });\n      return;\n    }\n  }\n}\n\nexport default handler;","map":{"version":3,"sources":["G:/FYP/LostNestfyp/lostnestprj/pages/api/stats/getposts.js"],"names":["connectToDatabase","handler","req","res","method","client","postedItemCollection","db","collection","lostPostsCount","countDocuments","Type","console","log","status","json","error","message"],"mappings":"AAAA,SAASA,iBAAT,QAAkC,iBAAlC;;AAEA,eAAeC,OAAf,CAAuBC,GAAvB,EAA4BC,GAA5B,EAAiC;AAC/B,MAAID,GAAG,CAACE,MAAJ,KAAe,MAAnB,EAA2B;AACzB;AACD,GAFD,MAEO;AACL,QAAI;AACF,YAAMC,MAAM,GAAG,MAAML,iBAAiB,EAAtC;AAEA,YAAMM,oBAAoB,GAAGD,MAAM,CAACE,EAAP,GAAYC,UAAZ,CAAuB,YAAvB,CAA7B,CAHE,CAIF;;AACA,YAAMC,cAAc,GAAG,MAAMH,oBAAoB,CAACI,cAArB,CAAoC;AAC/DC,QAAAA,IAAI,EAAE;AADyD,OAApC,CAA7B,CALE,CAQF;AACA;AACA;;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAYJ,cAAZ;AACAN,MAAAA,GAAG,CAACW,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBN,cAArB;AACD,KAbD,CAaE,OAAOO,KAAP,EAAc;AACdJ,MAAAA,OAAO,CAACI,KAAR,CAAc,QAAd,EAAwBA,KAAxB;AACAb,MAAAA,GAAG,CAACW,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACnBE,QAAAA,OAAO,EACL;AAFiB,OAArB;AAIA;AACD;AACF;AACF;;AAED,eAAehB,OAAf","sourcesContent":["import { connectToDatabase } from \"../../../lib/db\";\r\n\r\nasync function handler(req, res) {\r\n  if (req.method === \"POST\") {\r\n    return;\r\n  } else {\r\n    try {\r\n      const client = await connectToDatabase();\r\n\r\n      const postedItemCollection = client.db().collection(\"PostedItem\");\r\n      //const totalPostsCount = await postedItemCollection.countDocuments();\r\n      const lostPostsCount = await postedItemCollection.countDocuments({\r\n        Type: \"Lost\",\r\n      });\r\n      //   const foundPostsCount = await postedItemCollection.countDocuments({\r\n      //     Type: \"Found\",\r\n      //   });\r\n      console.log(lostPostsCount);\r\n      res.status(200).json(lostPostsCount);\r\n    } catch (error) {\r\n      console.error(\"Error:\", error);\r\n      res.status(500).json({\r\n        message:\r\n          \"Internal Server Error: Unable to fetch and Display Specific Posts\",\r\n      });\r\n      return;\r\n    }\r\n  }\r\n}\r\n\r\nexport default handler;\r\n"]},"metadata":{},"sourceType":"module"}
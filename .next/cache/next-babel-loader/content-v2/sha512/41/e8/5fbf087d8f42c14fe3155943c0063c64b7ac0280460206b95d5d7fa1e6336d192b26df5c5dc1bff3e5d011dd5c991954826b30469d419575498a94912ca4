{"ast":null,"code":"import { connectToDatabase } from \"../../../lib/db\";\n\nasync function handler(req, res) {\n  if (req.method !== \"POST\") {\n    return;\n  }\n\n  const data = req.body;\n  const {\n    email,\n    message,\n    enteredName\n  } = data;\n\n  if (!enteredName || !email || !email.includes(\"@\") || !message) {\n    res.status(422).json({\n      message: \"Invalid input - please enter correct details\"\n    });\n    return;\n  }\n\n  const client = await connectToDatabase();\n  const db = client.db();\n  const result = await db.collection(\"ContactForm\").insertOne({\n    name: enteredName,\n    email: email,\n    Message: message\n  });\n  res.status(201).json({\n    message: \"Created user!\"\n  });\n  client.close();\n}\n\nexport default handler;","map":{"version":3,"sources":["G:/FYP/LostNestfyp/lostnestprj/pages/api/contactForm/message.js"],"names":["connectToDatabase","handler","req","res","method","data","body","email","message","enteredName","includes","status","json","client","db","result","collection","insertOne","name","Message","close"],"mappings":"AAAA,SAASA,iBAAT,QAAkC,iBAAlC;;AAEA,eAAeC,OAAf,CAAuBC,GAAvB,EAA4BC,GAA5B,EAAiC;AAC/B,MAAID,GAAG,CAACE,MAAJ,KAAe,MAAnB,EAA2B;AACzB;AACD;;AAED,QAAMC,IAAI,GAAGH,GAAG,CAACI,IAAjB;AAEA,QAAM;AAAEC,IAAAA,KAAF;AAASC,IAAAA,OAAT;AAAkBC,IAAAA;AAAlB,MAAkCJ,IAAxC;;AAEA,MAAI,CAACI,WAAD,IAAgB,CAACF,KAAjB,IAA0B,CAACA,KAAK,CAACG,QAAN,CAAe,GAAf,CAA3B,IAAkD,CAACF,OAAvD,EAAgE;AAC9DL,IAAAA,GAAG,CAACQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACnBJ,MAAAA,OAAO,EAAE;AADU,KAArB;AAGA;AACD;;AAED,QAAMK,MAAM,GAAG,MAAMb,iBAAiB,EAAtC;AAEA,QAAMc,EAAE,GAAGD,MAAM,CAACC,EAAP,EAAX;AAEA,QAAMC,MAAM,GAAG,MAAMD,EAAE,CAACE,UAAH,CAAc,aAAd,EAA6BC,SAA7B,CAAuC;AAC1DC,IAAAA,IAAI,EAAET,WADoD;AAE1DF,IAAAA,KAAK,EAAEA,KAFmD;AAG1DY,IAAAA,OAAO,EAAEX;AAHiD,GAAvC,CAArB;AAMAL,EAAAA,GAAG,CAACQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEJ,IAAAA,OAAO,EAAE;AAAX,GAArB;AACAK,EAAAA,MAAM,CAACO,KAAP;AACD;;AAED,eAAenB,OAAf","sourcesContent":["import { connectToDatabase } from \"../../../lib/db\";\r\n\r\nasync function handler(req, res) {\r\n  if (req.method !== \"POST\") {\r\n    return;\r\n  }\r\n\r\n  const data = req.body;\r\n\r\n  const { email, message, enteredName } = data;\r\n\r\n  if (!enteredName || !email || !email.includes(\"@\") || !message) {\r\n    res.status(422).json({\r\n      message: \"Invalid input - please enter correct details\",\r\n    });\r\n    return;\r\n  }\r\n\r\n  const client = await connectToDatabase();\r\n\r\n  const db = client.db();\r\n\r\n  const result = await db.collection(\"ContactForm\").insertOne({\r\n    name: enteredName,\r\n    email: email,\r\n    Message: message,\r\n  });\r\n\r\n  res.status(201).json({ message: \"Created user!\" });\r\n  client.close();\r\n}\r\n\r\nexport default handler;\r\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import { connectToDatabase } from \"../../../lib/db\";\nimport { getSession } from \"next-auth/client\";\n\nasync function handler(req, res) {\n  if (req.method === \"POST\") {\n    const data = req.body;\n    const session = await getSession({\n      req: req\n    });\n\n    if (!session) {\n      res.status(401).json({\n        message: \"Not authenticated!\"\n      });\n      return;\n    }\n\n    const answerGivenBY = session.user.email;\n    const {\n      enteredAnswer,\n      postID\n    } = data;\n\n    if (!enteredAnswer || !postID || !answerGivenBY) {\n      return res.status(400).json({\n        message: \"fields are empty!\"\n      });\n    }\n\n    const client = await connectToDatabase();\n    const db = client.db();\n    const result = await db.collection(\"QAnswers\").insertOne({\n      Answer: enteredAnswer,\n      PostID: postID,\n      PosterID: answerGivenBY\n    });\n    res.status(201).json({\n      message: \"Answer Submitted\"\n    });\n    client.close();\n  } else {\n    return;\n  }\n}\n\nexport default handler;","map":null,"metadata":{},"sourceType":"module"}
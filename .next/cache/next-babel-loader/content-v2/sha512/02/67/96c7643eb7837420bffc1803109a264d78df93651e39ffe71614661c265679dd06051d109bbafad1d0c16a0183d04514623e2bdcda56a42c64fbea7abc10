{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React from \"react\";\nimport { useEffect, useState } from \"react\";\nimport ErrorComp from \"../UI/ErrorComp\";\nimport SpecificGrid from \"./SpecificGrid\";\nimport Loading from \"../UI/Loading\";\n\nfunction Specificpost() {\n  const {\n    0: isData,\n    1: setIsData\n  } = useState(\"\");\n  const {\n    0: isLoading,\n    1: setIsLoading\n  } = useState(false);\n  const {\n    0: isError,\n    1: setIsError\n  } = useState(false);\n  const {\n    0: isErrorData,\n    1: setIsErrorData\n  } = useState(\"Sorry but the page you are looking for does not exist.\");\n  const {\n    0: isPosts,\n    1: setIsPosts\n  } = useState(\"\");\n  useEffect(() => {\n    let isMounted = true; // Flag to track if the component is mounted\n\n    setIsLoading(true);\n    fetch(\"/api/myposts/fetchmypost\").then(response => response.json()).then(data => {\n      if (isMounted) {\n        //console.log(data);\n        const dataArray = Array.isArray(data) ? data : [data]; //console.log(dataArray);\n\n        if (dataArray.length === 0) {\n          setIsPosts(\"You have not Listed any Posts Yet...\");\n        }\n\n        setIsData(dataArray);\n\n        if (data.message) {\n          setIsErrorData(data.message);\n          setIsError(true);\n        }\n\n        setIsLoading(false);\n      }\n    }).catch(error => {\n      if (isMounted) {\n        setIsError(true);\n        setIsErrorData(\"An error occurred while fetching data.\");\n        setIsLoading(false);\n      }\n\n      console.error(\"Fetch error:\", error);\n    }); // Cleanup function\n\n    return () => {\n      isMounted = false; // Set flag to false when component is unmounted\n    };\n  }, [setIsData, setIsError, setIsErrorData]);\n\n  if (isPosts) {\n    return /*#__PURE__*/_jsx(\"h1\", {\n      style: {\n        textTransform: \"capitalize\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        marginTop: \"2rem\"\n      },\n      children: isPosts\n    });\n  }\n\n  if (isError) {\n    return /*#__PURE__*/_jsx(ErrorComp, {\n      errorData: isErrorData\n    });\n  }\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    children: [/*#__PURE__*/_jsx(SpecificGrid, {\n      data: isData\n    }), isLoading && /*#__PURE__*/_jsx(Loading, {})]\n  });\n}\n\nexport default Specificpost;","map":null,"metadata":{},"sourceType":"module"}
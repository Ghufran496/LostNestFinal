{"ast":null,"code":"import { connectToDatabase } from \"../../../lib/db\";\n\nasync function handler(req, res) {\n  if (req.method === \"POST\") {\n    return;\n  } else {\n    try {\n      const client = await connectToDatabase();\n      const postedItemCollection = client.db().collection(\"PostedItem\");\n      const totalPostsCount = await postedItemCollection.countDocuments();\n      const lostPostsCount = await postedItemCollection.countDocuments({\n        Type: \"Lost\"\n      });\n      const foundPostsCount = await postedItemCollection.countDocuments({\n        Type: \"Found\"\n      });\n      res.status(200).json(totalPosts);\n    } catch (error) {\n      console.error(\"Error:\", error);\n      res.status(500).json({\n        message: \"Internal Server Error: Unable to fetch and Display Specific Posts\"\n      });\n      return;\n    }\n  }\n}\n\nexport default handler;","map":{"version":3,"sources":["G:/FYP/LostNestfyp/lostnestprj/pages/api/stats/getposts.js"],"names":["connectToDatabase","handler","req","res","method","client","postedItemCollection","db","collection","totalPostsCount","countDocuments","lostPostsCount","Type","foundPostsCount","status","json","totalPosts","error","console","message"],"mappings":"AAAA,SAASA,iBAAT,QAAkC,iBAAlC;;AAEA,eAAeC,OAAf,CAAuBC,GAAvB,EAA4BC,GAA5B,EAAiC;AAC/B,MAAID,GAAG,CAACE,MAAJ,KAAe,MAAnB,EAA2B;AACzB;AACD,GAFD,MAEO;AACL,QAAI;AACF,YAAMC,MAAM,GAAG,MAAML,iBAAiB,EAAtC;AAEA,YAAMM,oBAAoB,GAAGD,MAAM,CAACE,EAAP,GAAYC,UAAZ,CAAuB,YAAvB,CAA7B;AACA,YAAMC,eAAe,GAAG,MAAMH,oBAAoB,CAACI,cAArB,EAA9B;AACA,YAAMC,cAAc,GAAG,MAAML,oBAAoB,CAACI,cAArB,CAAoC;AAC/DE,QAAAA,IAAI,EAAE;AADyD,OAApC,CAA7B;AAGA,YAAMC,eAAe,GAAG,MAAMP,oBAAoB,CAACI,cAArB,CAAoC;AAChEE,QAAAA,IAAI,EAAE;AAD0D,OAApC,CAA9B;AAIAT,MAAAA,GAAG,CAACW,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBC,UAArB;AACD,KAbD,CAaE,OAAOC,KAAP,EAAc;AACdC,MAAAA,OAAO,CAACD,KAAR,CAAc,QAAd,EAAwBA,KAAxB;AACAd,MAAAA,GAAG,CAACW,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACnBI,QAAAA,OAAO,EACL;AAFiB,OAArB;AAIA;AACD;AACF;AACF;;AAED,eAAelB,OAAf","sourcesContent":["import { connectToDatabase } from \"../../../lib/db\";\r\n\r\nasync function handler(req, res) {\r\n  if (req.method === \"POST\") {\r\n    return;\r\n  } else {\r\n    try {\r\n      const client = await connectToDatabase();\r\n\r\n      const postedItemCollection = client.db().collection(\"PostedItem\");\r\n      const totalPostsCount = await postedItemCollection.countDocuments();\r\n      const lostPostsCount = await postedItemCollection.countDocuments({\r\n        Type: \"Lost\",\r\n      });\r\n      const foundPostsCount = await postedItemCollection.countDocuments({\r\n        Type: \"Found\",\r\n      });\r\n\r\n      res.status(200).json(totalPosts);\r\n    } catch (error) {\r\n      console.error(\"Error:\", error);\r\n      res.status(500).json({\r\n        message:\r\n          \"Internal Server Error: Unable to fetch and Display Specific Posts\",\r\n      });\r\n      return;\r\n    }\r\n  }\r\n}\r\n\r\nexport default handler;\r\n"]},"metadata":{},"sourceType":"module"}